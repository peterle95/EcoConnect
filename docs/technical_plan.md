# Technical Plan: EcoConnect MVP

## Executive Summary

This document outlines the technical plan for developing the Minimum Viable Product (MVP) of EcoConnect, a platform designed to [**Placeholder: High-level project goal, e.g., promote sustainable living, connect environmentally-conscious users, etc.**].

- **Current Project Status**: The project is in its initial phase with a foundational technology stack and a basic user model. The architecture is a monorepo with a Next.js frontend, a NestJS backend, and a React Native mobile app.
- **MVP Definition**: The MVP will focus on [**Placeholder: Core MVP functionality, e.g., user registration, a dashboard for tracking sustainable activities, and a directory of eco-friendly businesses.**]
- **Target Timeline**: [**Placeholder: e.g., 6 weeks**]
- **Key Technical Decisions**: The plan leverages the existing technology stack and focuses on building out the core features required for the MVP.
- **Critical Success Factors**: A well-defined MVP scope, a robust backend API, and a seamless user experience across web and mobile platforms.

## Current Architecture Analysis

### Technology Stack

- **Frontend (Web)**: Next.js 15.3.3, React 18.3.1, Tailwind CSS, shadcn/ui
- **Backend**: NestJS 10.0.0, Prisma 5.14.0, PostgreSQL
- **Mobile**: React Native with Expo
- **AI**: Genkit with Google AI
- **Infrastructure**: Google App Hosting (inferred from `apphosting.yaml`)

### Component Breakdown

- **`EcoConnect-Web`**: A Next.js application responsible for the user-facing web interface.
- **`EcoConnect-Backend`**: A NestJS application providing a RESTful API for the web and mobile clients.
- **`EcoConnect-Mobile`**: A React Native application for the mobile experience.
- **`EcoConnect-AI`**: A Genkit integration for AI-powered features.

### Database Schema Analysis

The current database schema consists of a single `User` model:

```prisma
model User {
  id           String   @id @default(uuid())
  email        String   @unique
  passwordHash String
  createdAt    DateTime @default(now())
}
```

This schema is sufficient for user authentication but will need to be expanded to support the MVP features.

### Technical Debt Assessment

- **High Priority**: The current database schema is too simplistic and must be expanded to support the MVP features.
- **Medium Priority**: The frontend and backend applications are not yet connected. An API needs to be developed to link them.
- **Low Priority**: The mobile application is a placeholder and will require significant development post-MVP.

## MVP Definition & Scope

### Core Value Proposition

The MVP of EcoConnect will provide users with actionable sustainability tips and a curated directory of eco-friendly businesses, helping them to make more environmentally conscious choices in their daily lives.

### Essential Features

- **User Authentication**: Secure user registration and login.
- **AI-Powered Sustainability Tips**: Personalized sustainability tips generated by AI.
- **Business Directory**: A searchable directory of eco-friendly businesses.
- **User Dashboard**: A personalized dashboard to view saved tips and favorite businesses.

### Excluded Features

- **Mobile Application**: The React Native app is out of scope for the MVP.
- **Social Features**: User-to-user interaction, forums, and social sharing will be considered for future releases.
- **Business Accounts**: The ability for businesses to create and manage their own listings is out of scope for the MVP.

## MVP Feature Specification

### Feature 1: User Authentication
- **Description**: Allows users to create an account and log in to the platform.
- **User Story**: As a new user, I want to be able to sign up for an account so that I can access the platform's features.
- **Acceptance Criteria**: Users can sign up with an email and password. Users can log in with their credentials. Passwords are securely hashed and stored.
- **Technical Requirements**: Backend endpoints for user registration and login. Frontend forms for sign-up and login.
- **Dependencies**: None.
- **Effort Estimate**: 3 developer-days.

### Feature 2: AI-Powered Sustainability Tips
- **Description**: Generates personalized sustainability tips for users using Genkit and Google AI.
- **User Story**: As a user, I want to receive personalized sustainability tips so that I can learn how to live a more eco-friendly lifestyle.
- **Acceptance Criteria**: Users can request a new sustainability tip. The tip is relevant and actionable. Users can save tips to their dashboard.
- **Technical Requirements**: A Genkit flow that takes user preferences as input and returns a sustainability tip. A backend endpoint to trigger the Genkit flow. A frontend component to display the tip.
- **Dependencies**: User Authentication.
- **Effort Estimate**: 5 developer-days.

### Feature 3: Business Directory
- **Description**: A searchable directory of eco-friendly businesses.
- **User Story**: As a user, I want to be able to find eco-friendly businesses near me so that I can support sustainable companies.
- **Acceptance Criteria**: Users can view a list of businesses. Users can search for businesses by name and category. Each business has a detail page with more information.
- **Technical Requirements**: A `Business` model in the database. Backend endpoints for listing and searching for businesses. Frontend components for the directory and business detail pages.
- **Dependencies**: None.
- **Effort Estimate**: 8 developer-days.

### Feature 4: User Dashboard
- **Description**: A personalized dashboard for users to view their saved tips and favorite businesses.
- **User Story**: As a user, I want to have a dashboard where I can easily access my saved sustainability tips and favorite businesses.
- **Acceptance Criteria**: Users can view a list of their saved tips. Users can view a list of their favorite businesses. Users can remove tips and businesses from their dashboard.
- **Technical Requirements**: Database models for saved tips and favorite businesses. Backend endpoints to manage these relationships. A frontend component for the dashboard.
- **Dependencies**: User Authentication, AI-Powered Sustainability Tips, Business Directory.
- **Effort Estimate**: 5 developer-days.

## Development Roadmap

### Implementation Phases

### Phase 1: Foundation (Week 1)
**Goals**: Establish the database schema and create the core backend services for user authentication and business data management.
**Tasks**:
- [ ] Task 1: Update Prisma schema with `Business`, `SustainabilityTip`, and user relationship models. [Est: 1 day]
- [ ] Task 2: Implement backend services and controllers for user registration and login. [Est: 2 days]
- [ ] Task 3: Implement backend CRUD services for the `Business` model. [Est: 2 days]

**Deliverables**: A functional backend API with endpoints for user authentication and business data.
**Success Criteria**: All API endpoints are tested and documented.

### Phase 2: Core Development (Weeks 2-3)
**Goals**: Develop the AI-powered sustainability tips feature and build the frontend components for the main features.
**Tasks**:
- [ ] Task 4: Create the Genkit flow for generating sustainability tips. [Est: 3 days]
- [ ] Task 5: Implement the backend service to interact with the Genkit flow. [Est: 2 days]
- [ ] Task 6: Develop the frontend components for the business directory and search. [Est: 3 days]
- [ ] Task 7: Develop the frontend components for displaying sustainability tips. [Est: 2 days]

**Deliverables**: A functional AI tip generation service and the core frontend UI components.
**Success Criteria**: The AI service generates relevant tips, and the frontend components are responsive and accessible.

### Phase 3: Integration & Polish (Weeks 4-5)
**Goals**: Integrate the frontend and backend, build the user dashboard, and prepare for deployment.
**Tasks**:
- [ ] Task 8: Connect the frontend components to the backend API. [Est: 3 days]
- [ ] Task 9: Develop the user dashboard for managing saved tips and favorite businesses. [Est: 4 days]
- [ ] Task 10: Conduct end-to-end testing and bug fixing. [Est: 2 days]
- [ ] Task 11: Prepare for deployment to Google App Hosting. [Est: 1 day]

**Deliverables**: A fully integrated and tested web application, ready for MVP release.
**Success Criteria**: The application is deployed and accessible to users. All MVP features are functional.

## Technical Implementation Details

### Database Design

**Schema Changes**: The following additions are required to the `schema.prisma` file:

```prisma
model Business {
  id          String   @id @default(uuid())
  name        String
  description String
  category    String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  favoritedBy UserFavoriteBusiness[]
}

model SustainabilityTip {
  id        String   @id @default(uuid())
  content   String
  createdAt DateTime @default(now())
  savedBy   UserSavedTip[]
}

model UserSavedTip {
  user      User     @relation(fields: [userId], references: [id])
  userId    String
  tip       SustainabilityTip @relation(fields: [tipId], references: [id])
  tipId     String
  createdAt DateTime @default(now())

  @@id([userId, tipId])
}

model UserFavoriteBusiness {
  user        User     @relation(fields: [userId], references: [id])
  userId      String
  business    Business @relation(fields: [businessId], references: [id])
  businessId  String
  createdAt   DateTime @default(now())

  @@id([userId, businessId])
}

// Add to User model
model User {
  // ... existing fields
  savedTips        UserSavedTip[]
  favoriteBusinesses UserFavoriteBusiness[]
}
```

**Data Migration**: A new migration will be generated using `prisma migrate dev` to apply these schema changes.

### API Design

**New Endpoints**:
- `POST /auth/register`: Register a new user.
- `POST /auth/login`: Log in a user.
- `GET /businesses`: Get a list of all businesses.
- `GET /businesses/:id`: Get details for a specific business.
- `GET /tips/generate`: Generate a new sustainability tip.
- `POST /dashboard/tips`: Save a tip to the user's dashboard.
- `POST /dashboard/businesses`: Favorite a business.

**Authentication/Authorization**: Endpoints related to the user dashboard will be protected and require a valid JWT.

## Risk Assessment & Mitigation

### High-Risk Items
- **Risk**: The Genkit AI integration may not produce relevant or personalized tips.
  - **Impact**: High
  - **Probability**: Medium
  - **Mitigation**: Develop a robust prompting strategy and a feedback mechanism for users to rate the quality of tips.
  - **Contingency**: If the AI-generated tips are not satisfactory, fall back to a curated list of pre-written tips for the MVP.

- **Risk**: The timeline for the MVP is aggressive and may not be achievable.
  - **Impact**: Medium
  - **Probability**: High
  - **Mitigation**: Prioritize features ruthlessly and be prepared to descale the MVP if necessary.
  - **Contingency**: Extend the timeline and communicate the delay to stakeholders.

## Quality Assurance Strategy

- **Testing Strategy**: Unit tests will be written for all backend services and controllers. Frontend components will be tested using a combination of unit and integration tests. End-to-end tests will be conducted manually for the MVP.
- **Code Review Process**: All code will be reviewed by at least one other developer before being merged into the main branch.
- **Performance Testing**: Basic performance testing will be conducted to ensure the application is responsive under normal load.
- **Security Testing**: The application will be scanned for common vulnerabilities, and all dependencies will be kept up to date.

## Post-MVP Roadmap

### Future Enhancements

- **Mobile Application**: Develop the React Native mobile application to provide a native experience for users.
- **Social Features**: Implement features such as user profiles, forums, and the ability to share tips and businesses with friends.
- **Business Accounts**: Allow businesses to create and manage their own listings on the platform.

### Technical Improvements

- **Scalability**: Improve the scalability of the backend services to handle a larger number of users.
- **Performance**: Optimize the performance of the frontend application, including lazy loading and code splitting.
- **CI/CD**: Implement a full CI/CD pipeline to automate the testing and deployment process.
